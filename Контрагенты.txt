&После("ПередЗаписью")
Процедура RoistatПередЗаписью(Отказ)
	
	Запрос = Новый Запрос;
	Запрос.Текст = "ВЫБРАТЬ
	               |	Контрагенты.Ссылка КАК Ссылка
	               |ИЗ
	               |	Справочник.Контрагенты КАК Контрагенты
	               |ГДЕ
	               |	Контрагенты.ИНН = &ИНН
	               |	И Контрагенты.КПП = &КПП
	               |	И Контрагенты.ПометкаУдаления = ЛОЖЬ
	               |	И Контрагенты.Ссылка <> &Ссылка";
	Запрос.УстановитьПараметр("Ссылка", ЭтотОбъект.Ссылка);
	Запрос.УстановитьПараметр("ИНН", ЭтотОбъект.ИНН);
	Запрос.УстановитьПараметр("КПП", ЭтотОбъект.КПП);
	Если НЕ Запрос.Выполнить().Пустой() Тогда
		Сообщить("Контрагент с такими данными уже существует в базе!");
		Отказ = Истина;
	КонецЕсли;
	
КонецПроцедуры